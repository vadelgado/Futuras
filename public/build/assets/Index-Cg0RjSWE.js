import{r as o,W as K,j as e,Y as Q}from"./app-v4x2jw6C.js";import{F as c,I as U,S as u,W as Z}from"./WarningButton-CFXQRj0f.js";import{X as ee}from"./index.es-CjNWyhvm.js";import{F as se}from"./Footer-B9vCnMxi.js";import{A as oe}from"./AuthenticatedLayout-BJL2D5lr.js";import{M as re,S as ae,D as ie}from"./SecondaryButton-D2M8TlBC.js";import{P as N}from"./PrimaryButton-7K4P_c2K.js";import{T as te}from"./Textarea2-KNcbAT_F.js";import"./InputLabel-BW1ytRlX.js";import"./TextInput-DP60NE6N.js";import"./use-root-containers-Cy44haSc.js";import"./transition-Dw-nAuxZ.js";import"./ApplicationLogo-B2cWhToj.js";import"./dialog-CbUpWCEq.js";function Ne({auth:x,productos:E}){const[P,h]=o.useState(!1),[C,f]=o.useState(""),[F,y]=o.useState(1),[g,k]=o.useState(""),S=o.useRef(),R=o.useRef(),I=o.useRef(),T=o.useRef(),w=o.useRef(),M=o.useRef(),A=o.useRef(),W=o.useRef(),D={nombre:"",descripcion:"",precio:"",stock:"",imagen:null,categoria:"",tipoEspecificaciones:"",valorEspecificaciones:""},{data:r,setData:l,errors:a,delete:B,post:j,processing:b}=K(D),i=s=>{const{name:t,value:n}=s.target;l(p=>({...p,[t]:n}))},V=s=>{l("imagen",s.target.files[0])},v=(s,t,n,p,z,H,Y,_,q,J)=>{h(!0),y(s),s===1?(f("Agregar Producto"),l({nombre:"",descripcion:"",precio:"",stock:"",imagen:null,categoria:"",tipoEspecificaciones:"",valorEspecificaciones:""})):(f("Editar Producto"),l({id:t,nombre:n,descripcion:p,precio:z,stock:H,imagen:Y,categoria:_,tipoEspecificaciones:q,valorEspecificaciones:J}))},d=()=>{h(!1)},G=s=>{s.preventDefault(),F===1?j(route("AdministradorProductos.store"),{preserveScroll:!0,onSuccess:()=>{m("Producto Guardado")}}):j(route("AdministradorProductos.updatepost",r.id),{preserveScroll:!0,onSuccess:()=>{m("Producto Actualizado")}})},m=s=>{d(),u.fire({title:s,icon:"success"})},$=(s,t)=>{u.fire({title:`¿Estás seguro de eliminar el producto ${t}?`,icon:"warning",showCancelButton:!0,confirmButtonText:"Sí",cancelButtonText:"No"}).then(n=>{n.isConfirmed&&B(route("AdministradorProductos.destroy",s),{onSuccess:()=>{m("Producto Eliminado.")},onError:()=>{u.fire({title:"Error",text:"No se pudo eliminar el producto.",icon:"error"})}})})},L=[{name:"#",selector:(s,t)=>t+1,sortable:!0,maxWidth:"50px"},{name:"Nombre",selector:s=>s.nombre,sortable:!0,cell:s=>e.jsx("div",{className:"w-40 truncate",children:s.nombre})},{name:"Descripción",selector:s=>s.descripcion,sortable:!0,cell:s=>e.jsx("div",{className:"w-64 truncate",children:s.descripcion})},{name:"Precio",selector:s=>s.precio==50?"Info WhatsApp":s.precio,sortable:!0,maxWidth:"80px"},{name:"Stock",selector:s=>s.stock,sortable:!0,maxWidth:"80px"},{name:"Imagen Principal",cell:s=>e.jsx("div",{className:"flex items-center justify-center px-2 py-2",children:e.jsx("img",{src:`/storage/${s.imagen}`,alt:s.nombre,className:"w-16 h-16 rounded-full"})}),sortable:!1,maxWidth:"100px"},{name:"Categoría",selector:s=>s.categoria,sortable:!0,cell:s=>e.jsx("div",{className:"w-32 truncate",children:s.categoria})},{name:"Especificaciones",selector:s=>s.tipoEspecificaciones,sortable:!0,cell:s=>e.jsx("div",{className:"w-40 truncate",children:s.tipoEspecificaciones})},{name:"Valor Especificaciones",selector:s=>s.valorEspecificaciones,sortable:!0,cell:s=>e.jsx("div",{className:"w-40 truncate",children:s.valorEspecificaciones})},{name:"Editar",cell:s=>e.jsx(Z,{onClick:()=>v(2,s.id,s.nombre,s.descripcion,s.precio,s.stock,s.imagen,s.categoria,s.tipoEspecificaciones,s.valorEspecificaciones),children:e.jsx("i",{className:"fa-solid fa-pencil"})}),ignoreRowClick:!0,maxWidth:"80px"},{name:"Eliminar",cell:s=>e.jsx(ie,{onClick:()=>$(s.id,s.nombre),children:e.jsx("i",{className:"fa-solid fa-trash"})}),ignoreRowClick:!0,maxWidth:"80px"},{name:"Fotos",cell:s=>e.jsx("a",{className:"text-white bg-black hover:bg-gray-800 focus:ring-4 focus:ring-gray-300 font-medium rounded-lg text-sm px-5 py-2.5 inline-flex items-center",href:`/AdministradorFotosProductos?producto_id=${s.id}`,children:e.jsx("i",{className:"mr-2 fa-solid fa-image"})}),ignoreRowClick:!0,maxWidth:"100px"}],O=E.filter(s=>s.nombre.toLowerCase().includes(g.toLowerCase())),X={rowsPerPageText:"Registros por página",rangeSeparatorText:"de",selectAllRowsItem:!0,selectAllRowsItemText:"Todos"};return e.jsxs(oe,{user:x.user,header:e.jsx("h2",{className:"text-xl font-semibold leading-tight text-gray-800",children:"Productos"}),children:[e.jsx(Q,{title:"Panel Productos"}),e.jsx("div",{className:"flex flex-col min-h-screen",children:e.jsxs("main",{className:"flex-grow",children:[e.jsxs("div",{className:"container p-6 mx-auto mt-6 bg-white",children:[e.jsx("div",{className:"flex justify-end mt-2 mb-3",children:e.jsx(N,{onClick:()=>v(1),children:e.jsx("i",{className:"mr-2 fa-solid fa-plus-circle",children:"Añadir Producto"})})}),e.jsx("div",{className:"mb-4",children:e.jsx("input",{type:"text",className:"w-full p-2 border rounded",placeholder:"Buscar por Nombre del Producto",value:g,onChange:s=>k(s.target.value)})}),e.jsx("div",{className:"overflow-x-auto",children:e.jsx(ee,{title:"Productos Registrados",columns:L,data:O,pagination:!0,paginationComponentOptions:X,responsive:!0,fixedHeader:!0,noDataComponent:e.jsx("div",{children:"No hay productos Registrados"})})})]}),e.jsxs(re,{show:P,onClose:d,children:[e.jsx("h2",{className:"text-lg font-medium text-gray-900",children:C}),e.jsxs("form",{onSubmit:G,className:"p-6",children:[e.jsx(c,{htmlFor:"nombre",label:e.jsxs(e.Fragment,{children:[e.jsx("span",{children:"Nombre del Producto"}),e.jsx("span",{className:"text-red-500",children:"*"})]}),id:"nombre",type:"text",name:"nombre",ref:S,placeholder:"Nombre del Producto",value:r.nombre,onChange:i,errorMessage:a.nombre}),e.jsx(te,{htmlFor:"descripcion",label:e.jsxs(e.Fragment,{children:[e.jsx("span",{children:"Descripción"}),e.jsx("span",{className:"text-red-500",children:"*"})]}),id:"descripcion",type:"text",ref:R,name:"descripcion",placeholder:"Descripción del Producto",value:r.descripcion,onChange:i,errorMessage:a.descripcion}),e.jsx(c,{htmlFor:"precio",label:e.jsxs(e.Fragment,{children:[e.jsx("span",{children:"Precio"}),e.jsx("span",{className:"text-red-500",children:"*"})]}),id:"precio",type:"number",name:"precio",ref:I,placeholder:"Precio del Producto",value:r.precio,onChange:i,errorMessage:a.precio}),e.jsx(c,{htmlFor:"stock",label:e.jsxs(e.Fragment,{children:[e.jsx("span",{children:"Stock"}),e.jsx("span",{className:"text-red-500",children:"*"})]}),id:"stock",type:"number",name:"stock",ref:T,placeholder:"Stock del Producto",value:r.stock,onChange:i,errorMessage:a.stock}),e.jsx(U,{htmlFor:"imagen",label:"Foto Principal",id:"imagen",name:"imagen",ref:w,onChange:V,errorMessage:a.imagen}),e.jsx(c,{htmlFor:"categoria",label:e.jsxs(e.Fragment,{children:[e.jsx("span",{children:"Categoría"}),e.jsx("span",{className:"text-red-500",children:"*"})]}),id:"categoria",type:"text",name:"categoria",ref:M,placeholder:"Categoría del Producto",value:r.categoria,onChange:i,errorMessage:a.categoria}),e.jsx(c,{htmlFor:"tipoEspecificaciones",label:e.jsxs(e.Fragment,{children:[e.jsx("span",{children:"Tipo de Especificaciones Talla, Tamaño, Capacidad"}),e.jsx("span",{className:"text-red-500",children:"*"})]}),id:"tipoEspecificaciones",type:"text",name:"tipoEspecificaciones",ref:A,placeholder:"Tipo de Especificaciones del Producto",value:r.tipoEspecificaciones,onChange:i,errorMessage:a.tipoEspecificaciones}),e.jsx(c,{htmlFor:"valorEspecificaciones",label:e.jsxs(e.Fragment,{children:[e.jsx("span",{children:"Valor de Especificaciones"}),e.jsx("span",{className:"text-red-500",children:"*"})]}),id:"valorEspecificaciones",type:"text",name:"valorEspecificaciones",ref:W,placeholder:"Valor de Especificaciones del Producto",value:r.valorEspecificaciones,onChange:i,errorMessage:a.valorEspecificaciones}),e.jsxs("div",{className:"flex justify-end mt-4",children:[e.jsx(ae,{onClick:d,children:"Cancelar"}),e.jsx(N,{className:"ml-2",type:"submit",disabled:b,children:b?"Guardando...":"Guardar"})]})]})]})]})}),e.jsx(se,{auth:x})]})}export{Ne as default};
