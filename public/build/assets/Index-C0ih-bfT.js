import{r as a,W as D,j as e,Y as R}from"./app-Py4tU2H0.js";import{W as T,I as W,F,S as m}from"./WarningButton-CH2z0Znv.js";import{F as G}from"./Footer-DngfxR8x.js";import{A as O}from"./AuthenticatedLayout-4r2tBhma.js";import{D as $,M as z,S as L}from"./SecondaryButton-BtdH324-.js";import{P as b}from"./PrimaryButton-DYkUrTPg.js";import"./InputLabel-C_nYxBbU.js";import"./TextInput-DtIIGeNV.js";import"./use-root-containers-CfV9e3_Q.js";import"./transition-CM2RJgfQ.js";import"./ApplicationLogo-D8GfJnEy.js";import"./dialog-D-kMNKNZ.js";function ae({auth:u,galleries:x,productos:l}){const[w,p]=a.useState(!1),[v,g]=a.useState(""),[A,S]=a.useState(1),U=a.useRef(),_=a.useRef(),C=a.useRef(),k={largeUrl:null,width:"",height:"",fk_producto_id:l[0].id},{data:r,setData:o,errors:i,delete:P,post:j,processing:f}=D(k),N=s=>{const{name:t,value:c}=s.target;o(h=>({...h,[t]:c}))},M=s=>{o("largeUrl",s.target.files[0])},y=(s,t,c,h,I,V)=>{p(!0),S(s),s===1?(g("Agregar Foto Producto"),o({largeUrl:null,width:"",height:"",fk_producto_id:l[0].id})):(g("Editar Foto Producto"),o({id:t,largeUrl:c,width:h,height:I,fk_producto_id:l[0].id}))},n=()=>{p(!1)},B=s=>{s.preventDefault(),A===1?j(route("AdministradorFotosProductos.store"),{preserveScroll:!0,onSuccess:()=>{d("Foto Guardada.")}}):j(route("AdministradorFotosProductos.updatepost",r.id),{preserveScroll:!0,onSuccess:()=>{d("Foto Actualizada.")}})},d=s=>{n(),m.fire({title:s,icon:"success"})},E=s=>{m.fire({title:"¿Estás seguro de eliminar?",icon:"warning",showCancelButton:!0,confirmButtonText:"Sí",cancelButtonText:"No"}).then(t=>{t.isConfirmed&&P(route("AdministradorFotosProductos.destroy",s),{onSuccess:()=>{d("Foto Eliminada.")},onError:()=>{m.fire({title:"Error",text:"No se pudo eliminar la foto.",icon:"error"})}})})};return e.jsxs(O,{user:u.user,header:e.jsxs("h2",{className:"text-xl font-semibold leading-tight text-gray-800",children:["Fotos del producto ",l[0].nombre]}),children:[e.jsx(R,{title:"Fotos Producto"}),e.jsx("div",{className:"flex flex-col min-h-screen",children:e.jsxs("main",{className:"flex-grow",children:[e.jsxs("div",{className:"container p-6 mx-auto mt-6 bg-white",children:[e.jsx("div",{className:"flex justify-end mt-2 mb-3",children:e.jsx(b,{onClick:()=>y(1),children:e.jsx("i",{className:"mr-2 fa-solid fa-plus-circle",children:"Agregar Foto"})})}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full border border-gray-400 rounded-lg table-auto",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-gray-100",children:[e.jsx("th",{className:"px-4 py-2",children:"#"}),e.jsx("th",{className:"px-4 py-2",children:"Foto"}),e.jsx("th",{className:"px-4 py-2",children:"Ancho"}),e.jsx("th",{className:"px-4 py-2",children:"Alto"}),e.jsx("th",{className:"px-4 py-2",children:"Acciones"})]})}),e.jsx("tbody",{children:x.length>0?x.map((s,t)=>e.jsxs("tr",{className:"border-b last:border-0",children:[e.jsx("td",{className:"px-4 py-2",children:t+1}),e.jsx("td",{className:"flex items-center justify-center px-2 py-2",children:e.jsx("img",{src:`/storage/${s.largeUrl}`,alt:s.largeUrl,className:"w-16 h-16 rounded-full"})}),e.jsx("td",{className:"px-4 py-2",children:s.width}),e.jsx("td",{className:"px-4 py-2",children:s.height}),e.jsx("td",{className:"px-4 py-2",children:e.jsx(T,{onClick:()=>y(2,s.id,s.largeUrl,s.width,s.height,s.fk_producto_id),children:e.jsx("i",{className:"fa-solid fa-pencil"})})}),e.jsx("td",{className:"px-4 py-2",children:e.jsx($,{onClick:()=>E(s.id),children:e.jsx("i",{className:"fa-solid fa-trash"})})})]},s.id)):e.jsx("tr",{children:e.jsxs("td",{colSpan:"7",className:"px-4 py-2 text-center",children:["No hay Fotos del producto ",l[0].titulo]})})})]})})]}),e.jsxs(z,{show:w,onClose:n,children:[e.jsx("h2",{className:"text-lg font-medium text-gray-900",children:v}),e.jsxs("form",{onSubmit:B,className:"p-6",children:[e.jsx("input",{type:"text",value:r.fk_producto_id,name:"fk_producto_id",hidden:!0,readOnly:!0}),e.jsx(W,{htmlFor:"largeUrl",label:"Foto",id:"largeUrl",name:"largeUrl",ref:U,onChange:M,value:r.largeUrl,errorMessage:i.largeUrl,imageUrl:r.largeUrl?`http://127.0.0.1:8000/storage/${r.fotoLugar}`:null}),e.jsx(F,{htmlFor:"width",label:"Ancho",id:"width",type:"number",name:"width",ref:_,placeholder:"Ancho",value:r.width,onChange:N,errorMessage:i.width}),e.jsx(F,{htmlFor:"height",label:"Alto",id:"height",type:"number",name:"height",ref:C,placeholder:"Alto",value:r.height,onChange:N,errorMessage:i.height}),e.jsx("div",{className:"mt-6",children:e.jsxs(b,{processing:f?"true":"false",className:"mt-2",children:[e.jsx("i",{className:"mr-2 fa-solid fa-save"}),f?"Procesando...":"Guardar"]})}),e.jsx("div",{className:"flex justify-end mt-6",children:e.jsx(L,{onClick:n,children:"Cancelar"})})]})]})]})}),e.jsx(G,{auth:u})]})}export{ae as default};
