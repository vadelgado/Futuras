import{r as s,W as z,j as e,Y as H}from"./app-DH2PjR1F.js";import{F as u,I as V,S as x,W as Y}from"./WarningButton-C8EUOqIb.js";import{X as q}from"./index.es-BFQwMP24.js";import{F as J}from"./Footer-BmoU6iMX.js";import{A as K}from"./AuthenticatedLayout-CELmWSdc.js";import{M as Q,S as Z,D as _}from"./SecondaryButton-ookwqkO5.js";import{P as B}from"./PrimaryButton-cnYVdDHl.js";import{S as ee}from"./SelectField-Dww-qQ2r.js";import"./InputLabel-C4SI3C_m.js";import"./TextInput-BtzDJ0Cv.js";import"./use-root-containers-D4uciUAA.js";import"./transition-jABbeqha.js";import"./ApplicationLogo-Y3fC52Oh.js";import"./dialog-BlQSF8QJ.js";function he({auth:p,banners:N}){const[A,h]=s.useState(!1),[C,g]=s.useState(""),[S,F]=s.useState(1),[f,k]=s.useState(""),y=s.useRef(),P=s.useRef(),E=s.useRef(),T=s.useRef(),I=s.useRef(),R={title:"",subtitle:"",imagenPortada:null,linkUrl:"",isActive:""},{data:r,setData:i,errors:l,delete:w,post:j,processing:b}=z(R),o=t=>{const{name:a,value:n}=t.target;i(m=>({...m,[a]:n}))},M=t=>{i("imagenPortada",t.target.files[0])},v=(t,a,n,m,O,X,$)=>{h(!0),F(t),t===1?(g("Agregar Banner"),i({title:"",subtitle:"",imagenPortada:null,linkUrl:"",isActive:""})):(g("Editar Banner"),i({id:a,title:n,subtitle:m,imagenPortada:O,linkUrl:X,isActive:$}))},c=()=>{h(!1)},U=t=>{t.preventDefault(),S===1?j(route("AdministradorBanners.store"),{preserveScroll:!0,onSuccess:()=>{d("Banner Agregado.")}}):j(route("AdministradorBanners.updatepost",r.id),{preserveScroll:!0,onSuccess:()=>{d("Banner Actualizado.")}})},d=t=>{c(),x.fire({title:t,icon:"success"})},D=(t,a)=>{x.fire({title:`¿Estás seguro de eliminar Banner ${a}?`,icon:"warning",showCancelButton:!0,confirmButtonText:"Sí",cancelButtonText:"No"}).then(n=>{n.isConfirmed&&w(route("AdministradorBanners.destroy",t),{onSuccess:()=>{d("Banner Eliminado.")},onError:()=>{x.fire({title:"Error",text:"No se pudo eliminar el banner.",icon:"error"})}})})},W=[{name:"#",selector:(t,a)=>a+1,sortable:!0},{name:"Titulo",selector:t=>t.title,sortable:!0},{name:"Subtitulo",selector:t=>t.subtitle,sortable:!0},{name:"Imagen",cell:t=>e.jsx("div",{className:"flex items-center justify-center px-2 py-2",children:e.jsx("img",{src:`/storage/${t.imagenPortada}`,alt:t.title,className:"w-16 h-16 rounded-full"})}),sortable:!1},{name:"Enlace",selector:t=>t.linkUrl,sortable:!0},{name:"Estado",selector:t=>t.isActive,sortable:!0},{name:"Editar",cell:t=>e.jsx(Y,{onClick:()=>v(2,t.id,t.title,t.subtitle,t.imagenPortada,t.linkUrl,t.isActive),children:e.jsx("i",{className:"fa-solid fa-pencil"})}),ignoreRowClick:!0},{name:"Eliminar",cell:t=>e.jsx(_,{onClick:()=>D(t.id,t.title),children:e.jsx("i",{className:"fa-solid fa-trash"})}),ignoreRowClick:!0}],G=N.filter(t=>t.title.toLowerCase().includes(f.toLowerCase())),L={rowsPerPageText:"Registros por página",rangeSeparatorText:"de",selectAllRowsItem:!0,selectAllRowsItemText:"Todos"};return e.jsxs(K,{user:p.user,header:e.jsx("h2",{className:"text-xl font-semibold leading-tight text-gray-800",children:"Banners"}),children:[e.jsx(H,{title:"Panel Banners"}),e.jsx("div",{className:"flex flex-col min-h-screen",children:e.jsxs("main",{className:"flex-grow",children:[e.jsxs("div",{className:"container p-6 mx-auto mt-6 bg-white",children:[e.jsx("div",{className:"flex justify-end mt-2 mb-3",children:e.jsx(B,{onClick:()=>v(1),children:e.jsx("i",{className:"mr-2 fa-solid fa-plus-circle",children:"Añadir Banner"})})}),e.jsx("div",{className:"mb-4",children:e.jsx("input",{type:"text",className:"w-full p-2 border rounded",placeholder:"Buscar por Titulo",value:f,onChange:t=>k(t.target.value)})}),e.jsx("div",{className:"overflow-x-auto",children:e.jsx(q,{title:"Banners Registrados",columns:W,data:G,pagination:!0,paginationComponentOptions:L,responsive:!0,fixedHeader:!0,noDataComponent:e.jsx("div",{children:"No hay Banners registrados"})})})]}),e.jsxs(Q,{show:A,onClose:c,children:[e.jsx("h2",{className:"text-lg font-medium text-gray-900",children:C}),e.jsxs("form",{onSubmit:U,className:"p-6",children:[e.jsx(u,{htmlFor:"title",label:e.jsxs(e.Fragment,{children:[e.jsx("span",{children:"Titulo"}),e.jsx("span",{className:"text-red-500",children:"*"})]}),id:"title",type:"text",name:"title",ref:y,placeholder:"Titulo del Banner",value:r.title,onChange:o,errorMessage:l.title}),e.jsx(u,{htmlFor:"subtitle",label:e.jsxs(e.Fragment,{children:[e.jsx("span",{children:"Subtitulo"}),e.jsx("span",{className:"text-red-500",children:"*"})]}),id:"subtitle",type:"text",name:"subtitle",ref:P,placeholder:"Subtitulo del Banner",value:r.subtitle,onChange:o,errorMessage:l.subtitle}),e.jsx(ee,{htmlFor:"isActive",label:e.jsxs(e.Fragment,{children:[e.jsx("span",{children:"Estado"}),e.jsx("span",{className:"text-red-500",children:"*"})]}),id:"isActive",ref:I,name:"isActive",value:r.isActive,onChange:o,errorMessage:l.isActive,options:[{value:"",label:"Seleccione...",disabled:!0},{value:"1",label:"Activa"},{value:"0",label:"Inactiva"}]}),e.jsx(V,{htmlFor:"imagenPortada",label:"Foto de Portada",id:"imagenPortada",name:"imagenPortada",ref:E,onChange:M,errorMessage:l.imagenPortada}),e.jsx(u,{htmlFor:"linkUrl",label:e.jsxs(e.Fragment,{children:[e.jsx("span",{children:"Enlace"}),e.jsx("span",{className:"text-red-500",children:"*"})]}),id:"linkUrl",type:"text",name:"linkUrl",ref:T,placeholder:"Enlace del Banner",value:r.linkUrl,onChange:o,errorMessage:l.linkUrl}),e.jsxs("div",{className:"flex justify-end mt-4",children:[e.jsx(Z,{onClick:c,children:"Cancelar"}),e.jsx(B,{className:"ml-2",type:"submit",disabled:b,children:b?"Guardando...":"Guardar"})]})]})]})]})}),e.jsx(J,{auth:p})]})}export{he as default};
