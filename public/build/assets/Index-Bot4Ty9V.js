import{r as o,W as K,j as e,Y as Q}from"./app-Py4tU2H0.js";import{F as c,I as U,S as u,W as Z}from"./WarningButton-CH2z0Znv.js";import{X as ee}from"./index.es-BLsugS7D.js";import{F as se}from"./Footer-DngfxR8x.js";import{A as oe}from"./AuthenticatedLayout-4r2tBhma.js";import{M as re,S as ae,D as te}from"./SecondaryButton-BtdH324-.js";import{P as E}from"./PrimaryButton-DYkUrTPg.js";import{T as ie}from"./Textarea2-CWYVgAsW.js";import"./InputLabel-C_nYxBbU.js";import"./TextInput-DtIIGeNV.js";import"./use-root-containers-CfV9e3_Q.js";import"./transition-CM2RJgfQ.js";import"./ApplicationLogo-D8GfJnEy.js";import"./dialog-D-kMNKNZ.js";function Ee({auth:x,productos:N}){const[P,f]=o.useState(!1),[C,g]=o.useState(""),[F,y]=o.useState(1),[h,k]=o.useState(""),S=o.useRef(),R=o.useRef(),I=o.useRef(),T=o.useRef(),M=o.useRef(),A=o.useRef(),D=o.useRef(),w=o.useRef(),B={nombre:"",descripcion:"",precio:"",stock:"",imagen:null,categoria:"",tipoEspecificaciones:"",valorEspecificaciones:""},{data:r,setData:l,errors:a,delete:V,post:j,processing:b}=K(B),t=s=>{const{name:i,value:n}=s.target;l(p=>({...p,[i]:n}))},W=s=>{l("imagen",s.target.files[0])},v=(s,i,n,p,z,H,Y,_,q,J)=>{f(!0),y(s),s===1?(g("Agregar Producto"),l({nombre:"",descripcion:"",precio:"",stock:"",imagen:null,categoria:"",tipoEspecificaciones:"",valorEspecificaciones:""})):(g("Editar Producto"),l({id:i,nombre:n,descripcion:p,precio:z,stock:H,imagen:Y,categoria:_,tipoEspecificaciones:q,valorEspecificaciones:J}))},d=()=>{f(!1)},G=s=>{s.preventDefault(),F===1?j(route("AdministradorProductos.store"),{preserveScroll:!0,onSuccess:()=>{m("Producto Guardado")}}):j(route("AdministradorProductos.updatepost",r.id),{preserveScroll:!0,onSuccess:()=>{m("Producto Actualizado")}})},m=s=>{d(),u.fire({title:s,icon:"success"})},$=(s,i)=>{u.fire({title:`¿Estás seguro de eliminar el producto ${i}?`,icon:"warning",showCancelButton:!0,confirmButtonText:"Sí",cancelButtonText:"No"}).then(n=>{n.isConfirmed&&V(route("AdministradorProductos.destroy",s),{onSuccess:()=>{m("Producto Eliminado.")},onError:()=>{u.fire({title:"Error",text:"No se pudo eliminar el producto.",icon:"error"})}})})},L=[{name:"#",selector:(s,i)=>i+1,sortable:!0},{name:"Nombre",selector:s=>s.nombre,sortable:!0},{name:"Descripción",selector:s=>s.descripcion,sortable:!0},{name:"Precio",selector:s=>s.precio==50?"Info WhatsApp":s.precio,sortable:!0},{name:"stock",selector:s=>s.stock,sortable:!0},{name:"Imagen Principal",cell:s=>e.jsx("div",{className:"flex items-center justify-center px-2 py-2",children:e.jsx("img",{src:`/storage/${s.imagen}`,alt:s.nombre,className:"w-16 h-16 rounded-full"})}),sortable:!1},{name:"Categoría",selector:s=>s.categoria,sortable:!0},{name:"Especificaciones",selector:s=>s.tipoEspecificaciones,sortable:!0},{name:"Valor Especificaciones",selector:s=>s.valorEspecificaciones,sortable:!0},{name:"Editar",cell:s=>e.jsx(Z,{onClick:()=>v(2,s.id,s.nombre,s.descripcion,s.precio,s.stock,s.imagen,s.categoria,s.tipoEspecificaciones,s.valorEspecificaciones),children:e.jsx("i",{className:"fa-solid fa-pencil"})}),ignoreRowClick:!0},{name:"Eliminar",cell:s=>e.jsx(te,{onClick:()=>$(s.id,s.nombre),children:e.jsx("i",{className:"fa-solid fa-trash"})}),ignoreRowClick:!0},{name:"Fotos",cell:s=>e.jsx("a",{className:"text-white bg-black hover:bg-gray-800 focus:ring-4 focus:ring-gray-300 font-medium rounded-lg text-sm px-5 py-2.5 inline-flex items-center",href:`/AdministradorFotosProductos?producto_id=${s.id}`,children:e.jsx("i",{className:"mr-2 fa-solid fa-image"})}),ignoreRowClick:!0}],O=N.filter(s=>s.nombre.toLowerCase().includes(h.toLowerCase())),X={rowsPerPageText:"Registros por página",rangeSeparatorText:"de",selectAllRowsItem:!0,selectAllRowsItemText:"Todos"};return e.jsxs(oe,{user:x.user,header:e.jsx("h2",{className:"text-xl font-semibold leading-tight text-gray-800",children:"Productos"}),children:[e.jsx(Q,{title:"Panel Productos"}),e.jsx("div",{className:"flex flex-col min-h-screen",children:e.jsxs("main",{className:"flex-grow",children:[e.jsxs("div",{className:"container p-6 mx-auto mt-6 bg-white",children:[e.jsx("div",{className:"flex justify-end mt-2 mb-3",children:e.jsx(E,{onClick:()=>v(1),children:e.jsx("i",{className:"mr-2 fa-solid fa-plus-circle",children:"Añadir Producto"})})}),e.jsx("div",{className:"mb-4",children:e.jsx("input",{type:"text",className:"w-full p-2 border rounded",placeholder:"Buscar por Nombre del Producto",value:h,onChange:s=>k(s.target.value)})}),e.jsx("div",{className:"overflow-x-auto",children:e.jsx(ee,{title:"Productos Registrados",columns:L,data:O,pagination:!0,paginationComponentOptions:X,responsive:!0,fixedHeader:!0,noDataComponent:e.jsx("div",{children:"No hay productos Registrados"})})})]}),e.jsxs(re,{show:P,onClose:d,children:[e.jsx("h2",{className:"text-lg font-medium text-gray-900",children:C}),e.jsxs("form",{onSubmit:G,className:"p-6",children:[e.jsx(c,{htmlFor:"nombre",label:e.jsxs(e.Fragment,{children:[e.jsx("span",{children:"Nombre del Producto"}),e.jsx("span",{className:"text-red-500",children:"*"})]}),id:"nombre",type:"text",name:"nombre",ref:S,placeholder:"Nombre del Producto",value:r.nombre,onChange:t,errorMessage:a.nombre}),e.jsx(ie,{htmlFor:"descripcion",label:e.jsxs(e.Fragment,{children:[e.jsx("span",{children:"Descripción"}),e.jsx("span",{className:"text-red-500",children:"*"})]}),id:"descripcion",type:"text",ref:R,name:"descripcion",placeholder:"Descripción del Producto",value:r.descripcion,onChange:t,errorMessage:a.descripcion}),e.jsx(c,{htmlFor:"precio",label:e.jsxs(e.Fragment,{children:[e.jsx("span",{children:"Precio"}),e.jsx("span",{className:"text-red-500",children:"*"})]}),id:"precio",type:"number",name:"precio",ref:I,placeholder:"Precio del Producto",value:r.precio,onChange:t,errorMessage:a.precio}),e.jsx(c,{htmlFor:"stock",label:e.jsxs(e.Fragment,{children:[e.jsx("span",{children:"Stock"}),e.jsx("span",{className:"text-red-500",children:"*"})]}),id:"stock",type:"number",name:"stock",ref:T,placeholder:"Stock del Producto",value:r.stock,onChange:t,errorMessage:a.stock}),e.jsx(U,{htmlFor:"imagen",label:"Foto Principal",id:"imagen",name:"imagen",ref:M,onChange:W,errorMessage:a.imagen}),e.jsx(c,{htmlFor:"categoria",label:e.jsxs(e.Fragment,{children:[e.jsx("span",{children:"Categoría"}),e.jsx("span",{className:"text-red-500",children:"*"})]}),id:"categoria",type:"text",name:"categoria",ref:A,placeholder:"Categoría del Producto",value:r.categoria,onChange:t,errorMessage:a.categoria}),e.jsx(c,{htmlFor:"tipoEspecificaciones",label:e.jsxs(e.Fragment,{children:[e.jsx("span",{children:"Tipo de Especificaciones Talla, Tamaño, Capacidad"}),e.jsx("span",{className:"text-red-500",children:"*"})]}),id:"tipoEspecificaciones",type:"text",name:"tipoEspecificaciones",ref:D,placeholder:"Tipo de Especificaciones del Producto",value:r.tipoEspecificaciones,onChange:t,errorMessage:a.tipoEspecificaciones}),e.jsx(c,{htmlFor:"valorEspecificaciones",label:e.jsxs(e.Fragment,{children:[e.jsx("span",{children:"Valor de Especificaciones"}),e.jsx("span",{className:"text-red-500",children:"*"})]}),id:"valorEspecificaciones",type:"text",name:"valorEspecificaciones",ref:w,placeholder:"Valor de Especificaciones del Producto",value:r.valorEspecificaciones,onChange:t,errorMessage:a.valorEspecificaciones}),e.jsxs("div",{className:"flex justify-end mt-4",children:[e.jsx(ae,{onClick:d,children:"Cancelar"}),e.jsx(E,{className:"ml-2",type:"submit",disabled:b,children:b?"Guardando...":"Guardar"})]})]})]})]})}),e.jsx(se,{auth:x})]})}export{Ee as default};
