import{r,W as R,j as e,Y as P}from"./app-DH2PjR1F.js";import{W as T,I as W,F,S as m}from"./WarningButton-C8EUOqIb.js";import{F as G}from"./Footer-BmoU6iMX.js";import{A as O}from"./AuthenticatedLayout-CELmWSdc.js";import{D as $,M as z,S as L}from"./SecondaryButton-ookwqkO5.js";import{P as b}from"./PrimaryButton-cnYVdDHl.js";import"./InputLabel-C4SI3C_m.js";import"./TextInput-BtzDJ0Cv.js";import"./use-root-containers-D4uciUAA.js";import"./transition-jABbeqha.js";import"./ApplicationLogo-Y3fC52Oh.js";import"./dialog-BlQSF8QJ.js";function re({auth:x,galleries:u,noticias:l}){const[w,p]=r.useState(!1),[v,g]=r.useState(""),[A,S]=r.useState(1),U=r.useRef(),_=r.useRef(),C=r.useRef(),k={largeUrl:null,width:"",height:"",fk_noticia_id:l[0].id},{data:t,setData:i,errors:o,delete:M,post:j,processing:f}=R(k),N=s=>{const{name:a,value:d}=s.target;i(h=>({...h,[a]:d}))},B=s=>{i("largeUrl",s.target.files[0])},y=(s,a,d,h,D,V)=>{p(!0),S(s),s===1?(g("Agregar Foto Noticia"),i({largeUrl:null,width:"",height:"",fk_noticia_id:l[0].id})):(g("Editar Foto Noticia"),i({id:a,largeUrl:d,width:h,height:D,fk_noticia_id:l[0].id}))},n=()=>{p(!1)},E=s=>{s.preventDefault(),A===1?j(route("AdministradorFotosNoticias.store"),{preserveScroll:!0,onSuccess:()=>{c("Foto Guardada.")}}):j(route("AdministradorFotosNoticias.updatepost",t.id),{preserveScroll:!0,onSuccess:()=>{c("Foto Actualizada.")}})},c=s=>{n(),m.fire({title:s,icon:"success"})},I=s=>{m.fire({title:"¿Estás seguro de eliminar?",icon:"warning",showCancelButton:!0,confirmButtonText:"Sí",cancelButtonText:"No"}).then(a=>{a.isConfirmed&&M(route("AdministradorFotosNoticias.destroy",s),{onSuccess:()=>{c("Foto Eliminada.")},onError:()=>{m.fire({title:"Error",text:"No se pudo eliminar la foto.",icon:"error"})}})})};return e.jsxs(O,{user:x.user,header:e.jsxs("h2",{className:"text-xl font-semibold leading-tight text-gray-800",children:["Fotos de la noticia ",l[0].titulo]}),children:[e.jsx(P,{title:"Fotos Noticia"}),e.jsx("div",{className:"flex flex-col min-h-screen",children:e.jsxs("main",{className:"flex-grow",children:[e.jsxs("div",{className:"container p-6 mx-auto mt-6 bg-white",children:[e.jsx("div",{className:"flex justify-end mt-2 mb-3",children:e.jsx(b,{onClick:()=>y(1),children:e.jsx("i",{className:"mr-2 fa-solid fa-plus-circle",children:"Agregar Foto"})})}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full border border-gray-400 rounded-lg table-auto",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-gray-100",children:[e.jsx("th",{className:"px-4 py-2",children:"#"}),e.jsx("th",{className:"px-4 py-2",children:"Foto"}),e.jsx("th",{className:"px-4 py-2",children:"Ancho"}),e.jsx("th",{className:"px-4 py-2",children:"Alto"}),e.jsx("th",{className:"px-4 py-2",children:"Acciones"})]})}),e.jsx("tbody",{children:u.length>0?u.map((s,a)=>e.jsxs("tr",{className:"border-b last:border-0",children:[e.jsx("td",{className:"px-4 py-2",children:a+1}),e.jsx("td",{className:"flex items-center justify-center px-2 py-2",children:e.jsx("img",{src:`/storage/${s.largeUrl}`,alt:s.largeUrl,className:"w-16 h-16 rounded-full"})}),e.jsx("td",{className:"px-4 py-2",children:s.width}),e.jsx("td",{className:"px-4 py-2",children:s.height}),e.jsx("td",{className:"px-4 py-2",children:e.jsx(T,{onClick:()=>y(2,s.id,s.largeUrl,s.width,s.height,s.fk_noticia_id),children:e.jsx("i",{className:"fa-solid fa-pencil"})})}),e.jsx("td",{className:"px-4 py-2",children:e.jsx($,{onClick:()=>I(s.id),children:e.jsx("i",{className:"fa-solid fa-trash"})})})]},s.id)):e.jsx("tr",{children:e.jsxs("td",{colSpan:"7",className:"px-4 py-2 text-center",children:["No hay Fotos de la noticia ",l[0].titulo]})})})]})})]}),e.jsxs(z,{show:w,onClose:n,children:[e.jsx("h2",{className:"text-lg font-medium text-gray-900",children:v}),e.jsxs("form",{onSubmit:E,className:"p-6",children:[e.jsx("input",{type:"text",value:t.fk_noticia_id,name:"fk_noticia_id",hidden:!0,readOnly:!0}),e.jsx(W,{htmlFor:"largeUrl",label:"Foto",id:"largeUrl",name:"largeUrl",ref:U,onChange:B,value:t.largeUrl,errorMessage:o.largeUrl,imageUrl:t.largeUrl?`http://127.0.0.1:8000/storage/${t.fotoLugar}`:null}),e.jsx(F,{htmlFor:"width",label:"Ancho",id:"width",type:"number",name:"width",ref:_,placeholder:"Ancho",value:t.width,onChange:N,errorMessage:o.width}),e.jsx(F,{htmlFor:"height",label:"Alto",id:"height",type:"number",name:"height",ref:C,placeholder:"Alto",value:t.height,onChange:N,errorMessage:o.height}),e.jsx("div",{className:"mt-6",children:e.jsxs(b,{processing:f?"true":"false",className:"mt-2",children:[e.jsx("i",{className:"mr-2 fa-solid fa-save"}),f?"Procesando...":"Guardar"]})}),e.jsx("div",{className:"flex justify-end mt-6",children:e.jsx(L,{onClick:n,children:"Cancelar"})})]})]})]})}),e.jsx(G,{auth:x})]})}export{re as default};
