import{r as o,W,j as e,Y as _}from"./app-LB1XR0Q5.js";import{F as $,I as L,S as m,W as X}from"./WarningButton-DF3HYguP.js";import{X as z}from"./index.es-DTxt1n9U.js";import{F as H}from"./Footer-Tnkn5HxR.js";import{A as V}from"./AuthenticatedLayout-DI5cjRGL.js";import{M as Y,S as q,D as J}from"./SecondaryButton-BLpy2u1z.js";import{P as C}from"./PrimaryButton-dicUtsUB.js";import{T as K}from"./Textarea2-B2FHhjJg.js";import"./InputLabel-CMQcdI56.js";import"./TextInput-B-_nMCv-.js";import"./use-root-containers-DyAKLgTX.js";import"./transition-Bof0buh3.js";import"./ApplicationLogo-Dlb3Nmhn.js";import"./dialog-CWdNBX_x.js";function me({auth:u,noticias:v}){const[b,x]=o.useState(!1),[y,f]=o.useState(""),[F,P]=o.useState(1),[p,S]=o.useState(""),T=o.useRef(),w=o.useRef(),k=o.useRef(),A={titulo:"",contenido:"",imagenPortada:null},{data:s,setData:r,errors:n,delete:R,post:g,processing:h}=W(A),j=t=>{const{name:a,value:i}=t.target;r(d=>({...d,[a]:i}))},E=t=>{r("imagenPortada",t.target.files[0])},N=(t,a,i,d,O)=>{x(!0),P(t),t===1?(f("Agregar Noticia"),r({titulo:"",contenido:"",imagenPortada:null})):(f("Editar Noticia"),r({id:a,titulo:i,contenido:d,imagenPortada:O}))},l=()=>{x(!1)},I=t=>{t.preventDefault(),F===1?g(route("AdministradorNoticias.store"),{preserveScroll:!0,onSuccess:()=>{c("Noticia Guardada")}}):g(route("AdministradorNoticias.updatepost",s.id),{preserveScroll:!0,onSuccess:()=>{c("Noticia Actualizada")}})},c=t=>{l(),m.fire({title:t,icon:"success"})},B=(t,a)=>{m.fire({title:`¿Estás seguro de eliminar ${a}?`,icon:"warning",showCancelButton:!0,confirmButtonText:"Sí",cancelButtonText:"No"}).then(i=>{i.isConfirmed&&R(route("AdministradorNoticias.destroy",t),{onSuccess:()=>{c("Noticia Eliminada.")},onError:()=>{m.fire({title:"Error",text:"No se pudo eliminar la noticia.",icon:"error"})}})})},M=[{name:"#",selector:(t,a)=>a+1,sortable:!0},{name:"Nombre",selector:t=>t.titulo,sortable:!0},{name:"Contenido",selector:t=>t.contenido,sortable:!0},{name:"Portada",cell:t=>e.jsx("div",{className:"flex items-center justify-center px-2 py-2",children:e.jsx("img",{src:`/storage/${t.imagenPortada}`,alt:t.titulo,className:"w-16 h-16 rounded-full"})}),sortable:!1},{name:"Editar",cell:t=>e.jsx(X,{onClick:()=>N(2,t.id,t.titulo,t.contenido,t.imagenPortada),children:e.jsx("i",{className:"fa-solid fa-pencil"})}),ignoreRowClick:!0},{name:"Eliminar",cell:t=>e.jsx(J,{onClick:()=>B(t.id,t.titulo),children:e.jsx("i",{className:"fa-solid fa-trash"})}),ignoreRowClick:!0},{name:"Fotos",cell:t=>e.jsx("a",{className:"text-white bg-black hover:bg-gray-800 focus:ring-4 focus:ring-gray-300 font-medium rounded-lg text-sm px-5 py-2.5 inline-flex items-center",href:`/AdministradorFotosNoticias?noticia_id=${t.id}`,children:e.jsx("i",{className:"mr-2 fa-solid fa-image",children:" Fotos"})}),ignoreRowClick:!0}],D=v.filter(t=>t.titulo.toLowerCase().includes(p.toLowerCase())),G={rowsPerPageText:"Registros por página",rangeSeparatorText:"de",selectAllRowsItem:!0,selectAllRowsItemText:"Todos"};return e.jsxs(V,{user:u.user,header:e.jsx("h2",{className:"text-xl font-semibold leading-tight text-gray-800",children:"Noticias"}),children:[e.jsx(_,{title:"Panel Noticias"}),e.jsx("div",{className:"flex flex-col min-h-screen",children:e.jsxs("main",{className:"flex-grow",children:[e.jsxs("div",{className:"container p-6 mx-auto mt-6 bg-white",children:[e.jsx("div",{className:"flex justify-end mt-2 mb-3",children:e.jsx(C,{onClick:()=>N(1),children:e.jsx("i",{className:"mr-2 fa-solid fa-plus-circle",children:"Añadir Noticia"})})}),e.jsx("div",{className:"mb-4",children:e.jsx("input",{type:"text",className:"w-full p-2 border rounded",placeholder:"Buscar por Titulo",value:p,onChange:t=>S(t.target.value)})}),e.jsx("div",{className:"overflow-x-auto",children:e.jsx(z,{title:"Noticias Registradas",columns:M,data:D,pagination:!0,paginationComponentOptions:G,responsive:!0,fixedHeader:!0,noDataComponent:e.jsx("div",{children:"No hay noticias registradas"})})})]}),e.jsxs(Y,{show:b,onClose:l,children:[e.jsx("h2",{className:"text-lg font-medium text-gray-900",children:y}),e.jsxs("form",{onSubmit:I,className:"p-6",children:[e.jsx("input",{type:"text",value:s.fk_torneo,name:"fk_torneo",hidden:!0,readOnly:!0}),e.jsx($,{htmlFor:"titulo",label:e.jsxs(e.Fragment,{children:[e.jsx("span",{children:"Titulo"}),e.jsx("span",{className:"text-red-500",children:"*"})]}),id:"titulo",type:"text",name:"titulo",ref:T,placeholder:"Titulo de la noticia",value:s.titulo,onChange:j,errorMessage:n.titulo}),e.jsx(K,{htmlFor:"contenido",label:e.jsxs(e.Fragment,{children:[e.jsx("span",{children:"Contenido"}),e.jsx("span",{className:"text-red-500",children:"*"})]}),id:"contenido",type:"text",ref:w,name:"contenido",placeholder:"Contenido de la noticia",value:s.contenido,onChange:j,errorMessage:n.contenido}),e.jsx(L,{htmlFor:"imagenPortada",label:"Foto de Portada",id:"imagenPortada",name:"imagenPortada",ref:k,onChange:E,errorMessage:n.imagenPortada}),e.jsxs("div",{className:"flex justify-end mt-4",children:[e.jsx(q,{onClick:l,children:"Cancelar"}),e.jsx(C,{className:"ml-2",type:"submit",disabled:h,children:h?"Guardando...":"Guardar"})]})]})]})]})}),e.jsx(H,{auth:u})]})}export{me as default};
