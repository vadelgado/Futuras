import{r as o,W as O,j as e,Y as _}from"./app-DnZQN1uG.js";import{F as $,I as H,S as m,W as L}from"./WarningButton-Djy0H0ts.js";import{X}from"./index.es-UGeOOmel.js";import{F as z}from"./Footer-CNmne7-6.js";import{A as V}from"./AuthenticatedLayout-Bk4gB8Gh.js";import{M as Y,S as q,D as J}from"./SecondaryButton-58CVLn1c.js";import{P as y}from"./PrimaryButton-BT6UoXBT.js";import{T as K}from"./Textarea2-CnukfbDg.js";import"./InputLabel-8wxVtlAM.js";import"./TextInput-ykI4NbuO.js";import"./use-root-containers-DOEhl0iD.js";import"./transition-C-dXlH6k.js";import"./ApplicationLogo-DY0BpSRC.js";import"./dialog-B_wHkCL1.js";function me({auth:u,noticias:b}){const[C,x]=o.useState(!1),[v,h]=o.useState(""),[w,P]=o.useState(1),[p,S]=o.useState(""),F=o.useRef(),T=o.useRef(),R=o.useRef(),k={titulo:"",contenido:"",imagenPortada:null},{data:s,setData:r,errors:n,delete:A,post:f,processing:g}=O(k),j=t=>{const{name:a,value:i}=t.target;r(d=>({...d,[a]:i}))},E=t=>{r("imagenPortada",t.target.files[0])},N=(t,a,i,d,G)=>{x(!0),P(t),t===1?(h("Agregar Noticia"),r({titulo:"",contenido:"",imagenPortada:null})):(h("Editar Noticia"),r({id:a,titulo:i,contenido:d,imagenPortada:G}))},l=()=>{x(!1)},I=t=>{t.preventDefault(),w===1?f(route("AdministradorNoticias.store"),{preserveScroll:!0,onSuccess:()=>{c("Noticia Guardada")}}):f(route("AdministradorNoticias.updatepost",s.id),{preserveScroll:!0,onSuccess:()=>{c("Noticia Actualizada")}})},c=t=>{l(),m.fire({title:t,icon:"success"})},W=(t,a)=>{m.fire({title:`¿Estás seguro de eliminar ${a}?`,icon:"warning",showCancelButton:!0,confirmButtonText:"Sí",cancelButtonText:"No"}).then(i=>{i.isConfirmed&&A(route("AdministradorNoticias.destroy",t),{onSuccess:()=>{c("Noticia Eliminada.")},onError:()=>{m.fire({title:"Error",text:"No se pudo eliminar la noticia.",icon:"error"})}})})},B=[{name:"#",selector:(t,a)=>a+1,sortable:!0,maxWidth:"50px"},{name:"Nombre",selector:t=>t.titulo,sortable:!0,cell:t=>e.jsx("div",{className:"w-40 truncate",children:t.titulo})},{name:"Contenido",selector:t=>t.contenido,sortable:!0,cell:t=>e.jsx("div",{className:"truncate w-60",children:t.contenido})},{name:"Portada",cell:t=>e.jsx("div",{className:"flex items-center justify-center px-2 py-2",children:e.jsx("img",{src:`/storage/${t.imagenPortada}`,alt:t.titulo,className:"w-16 h-16 rounded-full"})}),sortable:!1,maxWidth:"80px"},{name:"Editar",cell:t=>e.jsx(L,{onClick:()=>N(2,t.id,t.titulo,t.contenido,t.imagenPortada),children:e.jsx("i",{className:"fa-solid fa-pencil"})}),ignoreRowClick:!0,maxWidth:"80px"},{name:"Eliminar",cell:t=>e.jsx(J,{onClick:()=>W(t.id,t.titulo),children:e.jsx("i",{className:"fa-solid fa-trash"})}),ignoreRowClick:!0,maxWidth:"80px"},{name:"Fotos",cell:t=>e.jsx("a",{className:"text-white bg-black hover:bg-gray-800 focus:ring-4 focus:ring-gray-300 font-medium rounded-lg text-sm px-5 py-2.5 inline-flex items-center",href:`/AdministradorFotosNoticias?noticia_id=${t.id}`,children:e.jsx("i",{className:"fa-solid fa-image"})}),ignoreRowClick:!0,maxWidth:"100px"}],M=b.filter(t=>t.titulo.toLowerCase().includes(p.toLowerCase())),D={rowsPerPageText:"Registros por página",rangeSeparatorText:"de",selectAllRowsItem:!0,selectAllRowsItemText:"Todos"};return e.jsxs(V,{user:u.user,header:e.jsx("h2",{className:"text-xl font-semibold leading-tight text-gray-800",children:"Noticias"}),children:[e.jsx(_,{title:"Panel Noticias"}),e.jsx("div",{className:"flex flex-col min-h-screen",children:e.jsxs("main",{className:"flex-grow",children:[e.jsxs("div",{className:"container p-6 mx-auto mt-6 bg-white",children:[e.jsx("div",{className:"flex justify-end mt-2 mb-3",children:e.jsx(y,{onClick:()=>N(1),children:e.jsx("i",{className:"mr-2 fa-solid fa-plus-circle",children:"Añadir Noticia"})})}),e.jsx("div",{className:"mb-4",children:e.jsx("input",{type:"text",className:"w-full p-2 border rounded",placeholder:"Buscar por Titulo",value:p,onChange:t=>S(t.target.value)})}),e.jsx("div",{className:"overflow-x-auto",children:e.jsx(X,{title:"Noticias Registradas",columns:B,data:M,pagination:!0,paginationComponentOptions:D,responsive:!0,fixedHeader:!0,noDataComponent:e.jsx("div",{children:"No hay noticias registradas"}),customStyles:{header:{style:{minHeight:"56px"}},headRow:{style:{backgroundColor:"#f8f9fa"}},headCells:{style:{"&:not(:last-of-type)":{borderRight:"1px solid rgba(224, 224, 224, 0.8)"},fontWeight:"bold"}},cells:{style:{"&:not(:last-of-type)":{borderRight:"1px solid rgba(224, 224, 224, 0.8)"}}}}})})]}),e.jsxs(Y,{show:C,onClose:l,children:[e.jsx("h2",{className:"text-lg font-medium text-gray-900",children:v}),e.jsxs("form",{onSubmit:I,className:"p-6",children:[e.jsx("input",{type:"text",value:s.fk_torneo,name:"fk_torneo",hidden:!0,readOnly:!0}),e.jsx($,{htmlFor:"titulo",label:e.jsxs(e.Fragment,{children:[e.jsx("span",{children:"Titulo"}),e.jsx("span",{className:"text-red-500",children:"*"})]}),id:"titulo",type:"text",name:"titulo",ref:F,placeholder:"Titulo de la noticia",value:s.titulo,onChange:j,errorMessage:n.titulo}),e.jsx(K,{htmlFor:"contenido",label:e.jsxs(e.Fragment,{children:[e.jsx("span",{children:"Contenido"}),e.jsx("span",{className:"text-red-500",children:"*"})]}),id:"contenido",type:"text",ref:T,name:"contenido",placeholder:"Contenido de la noticia",value:s.contenido,onChange:j,errorMessage:n.contenido}),e.jsx(H,{htmlFor:"imagenPortada",label:"Foto de Portada",id:"imagenPortada",name:"imagenPortada",ref:R,onChange:E,errorMessage:n.imagenPortada}),e.jsxs("div",{className:"flex justify-end mt-4",children:[e.jsx(q,{onClick:l,children:"Cancelar"}),e.jsx(y,{className:"ml-2",type:"submit",disabled:g,children:g?"Guardando...":"Guardar"})]})]})]})]})}),e.jsx(z,{auth:u})]})}export{me as default};
