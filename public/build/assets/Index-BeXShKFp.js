import{r as a,W as R,j as e,Y as P}from"./app-LB1XR0Q5.js";import{W as T,I as W,F,S as m}from"./WarningButton-DF3HYguP.js";import{F as G}from"./Footer-Tnkn5HxR.js";import{A as O}from"./AuthenticatedLayout-DI5cjRGL.js";import{D as $,M as z,S as L}from"./SecondaryButton-BLpy2u1z.js";import{P as b}from"./PrimaryButton-dicUtsUB.js";import"./InputLabel-CMQcdI56.js";import"./TextInput-B-_nMCv-.js";import"./use-root-containers-DyAKLgTX.js";import"./transition-Bof0buh3.js";import"./ApplicationLogo-Dlb3Nmhn.js";import"./dialog-CWdNBX_x.js";function ae({auth:x,galleries:u,sedes:l}){const[S,p]=a.useState(!1),[w,g]=a.useState(""),[v,A]=a.useState(1),U=a.useRef(),_=a.useRef(),C=a.useRef(),k={largeUrl:null,width:"",height:"",fk_sede_id:l[0].id},{data:r,setData:i,errors:o,delete:M,post:j,processing:f}=R(k),N=s=>{const{name:t,value:c}=s.target;i(h=>({...h,[t]:c}))},B=s=>{i("largeUrl",s.target.files[0])},y=(s,t,c,h,D,V)=>{p(!0),A(s),s===1?(g("Agregar Foto Sede"),i({largeUrl:null,width:"",height:"",fk_sede_id:l[0].id})):(g("Editar Foto Sede"),i({id:t,largeUrl:c,width:h,height:D,fk_sede_id:l[0].id}))},n=()=>{p(!1)},E=s=>{s.preventDefault(),v===1?j(route("AdministradorFotosSedes.store"),{preserveScroll:!0,onSuccess:()=>{d("Foto Guardada.")}}):j(route("AdministradorFotosSedes.updatepost",r.id),{preserveScroll:!0,onSuccess:()=>{d("Foto Actualizada.")}})},d=s=>{n(),m.fire({title:s,icon:"success"})},I=s=>{m.fire({title:"¿Estás seguro de eliminar?",icon:"warning",showCancelButton:!0,confirmButtonText:"Sí",cancelButtonText:"No"}).then(t=>{t.isConfirmed&&M(route("AdministradorFotosSedes.destroy",s),{onSuccess:()=>{d("Foto Eliminada.")},onError:()=>{m.fire({title:"Error",text:"No se pudo eliminar la foto.",icon:"error"})}})})};return e.jsxs(O,{user:x.user,header:e.jsxs("h2",{className:"text-xl font-semibold leading-tight text-gray-800",children:["Fotos de la sede ",l[0].nombre]}),children:[e.jsx(P,{title:"Fotos Sede"}),e.jsx("div",{className:"flex flex-col min-h-screen",children:e.jsxs("main",{className:"flex-grow",children:[e.jsxs("div",{className:"container p-6 mx-auto mt-6 bg-white",children:[e.jsx("div",{className:"flex justify-end mt-2 mb-3",children:e.jsx(b,{onClick:()=>y(1),children:e.jsx("i",{className:"mr-2 fa-solid fa-plus-circle",children:"Agregar Foto"})})}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full border border-gray-400 rounded-lg table-auto",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-gray-100",children:[e.jsx("th",{className:"px-4 py-2",children:"#"}),e.jsx("th",{className:"px-4 py-2",children:"Foto"}),e.jsx("th",{className:"px-4 py-2",children:"Ancho"}),e.jsx("th",{className:"px-4 py-2",children:"Alto"}),e.jsx("th",{className:"px-4 py-2",children:"Acciones"})]})}),e.jsx("tbody",{children:u.length>0?u.map((s,t)=>e.jsxs("tr",{className:"border-b last:border-0",children:[e.jsx("td",{className:"px-4 py-2",children:t+1}),e.jsx("td",{className:"flex items-center justify-center px-2 py-2",children:e.jsx("img",{src:`/storage/${s.largeUrl}`,alt:s.largeUrl,className:"w-16 h-16 rounded-full"})}),e.jsx("td",{className:"px-4 py-2",children:s.width}),e.jsx("td",{className:"px-4 py-2",children:s.height}),e.jsx("td",{className:"px-4 py-2",children:e.jsx(T,{onClick:()=>y(2,s.id,s.largeUrl,s.width,s.height,s.fk_sede_id),children:e.jsx("i",{className:"fa-solid fa-pencil"})})}),e.jsx("td",{className:"px-4 py-2",children:e.jsx($,{onClick:()=>I(s.id),children:e.jsx("i",{className:"fa-solid fa-trash"})})})]},s.id)):e.jsx("tr",{children:e.jsxs("td",{colSpan:"7",className:"px-4 py-2 text-center",children:["No hay Fotos de la sede ",l[0].nombre]})})})]})})]}),e.jsxs(z,{show:S,onClose:n,children:[e.jsx("h2",{className:"text-lg font-medium text-gray-900",children:w}),e.jsxs("form",{onSubmit:E,className:"p-6",children:[e.jsx("input",{type:"text",value:r.fk_sede_id,name:"fk_sede_id",hidden:!0,readOnly:!0}),e.jsx(W,{htmlFor:"largeUrl",label:"Foto",id:"largeUrl",name:"largeUrl",ref:U,onChange:B,value:r.largeUrl,errorMessage:o.largeUrl,imageUrl:r.largeUrl?`http://127.0.0.1:8000/storage/${r.fotoLugar}`:null}),e.jsx(F,{htmlFor:"width",label:"Ancho",id:"width",type:"number",name:"width",ref:_,placeholder:"Ancho",value:r.width,onChange:N,errorMessage:o.width}),e.jsx(F,{htmlFor:"height",label:"Alto",id:"height",type:"number",name:"height",ref:C,placeholder:"Alto",value:r.height,onChange:N,errorMessage:o.height}),e.jsx("div",{className:"mt-6",children:e.jsxs(b,{processing:f?"true":"false",className:"mt-2",children:[e.jsx("i",{className:"mr-2 fa-solid fa-save"}),f?"Procesando...":"Guardar"]})}),e.jsx("div",{className:"flex justify-end mt-6",children:e.jsx(L,{onClick:n,children:"Cancelar"})})]})]})]})}),e.jsx(G,{auth:x})]})}export{ae as default};
